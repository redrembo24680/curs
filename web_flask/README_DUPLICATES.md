# Інструкція з видалення дублікатів матчів

## Поточна ситуація

Якщо ви вже видалили дублікати вручну через DB Browser, залишилось 5 матчів (id: 1, 3, 5, 7, 9).

## Що потрібно зробити

### 1. Перезапустити C++ сервер

**ВАЖЛИВО:** C++ сервер завантажує дані з бази тільки при старті. Після змін в базі потрібно перезапустити сервер!

1. Закрийте C++ сервер (voting_server.exe)
2. Запустіть його знову
3. Оновіть сторінку в браузері (Ctrl+F5)

### 2. Перевірити зміни

Запустіть скрипт для перевірки:
```bash
cd web_flask
python verify_changes.py
```

## Скрипти для майбутнього використання

### Автоматичне знаходження дублікатів

**find_duplicates.sql** - знаходить дублікати без видалення:
- Відкрийте в DB Browser
- Виконайте скрипт
- Подивіться, які матчі будуть видалені

### Автоматичне видалення дублікатів

**delete_duplicates_auto.sql** - автоматично знаходить і видаляє дублікати:
- Знаходить матчі з однаковими team1 та team2
- Залишає матч з найменшим id
- Видаляє інші дублікати

**delete_duplicates_safe.py** - Python скрипт з перевірками:
```bash
python delete_duplicates_safe.py
```

## Чому скрипт не працював

Старий скрипт `delete_duplicates.sql` використовував жорстко закодовані ID:
- `DELETE FROM matches WHERE id IN (2, 4, 6, 8, 10);`

Якщо ці матчі вже видалені, скрипт нічого не зробить. Новий скрипт автоматично знаходить дублікати через SQL JOIN.




